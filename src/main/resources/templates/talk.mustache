{{> header}}



<div class="container-xxl">
    {{#admin}}
        <div class="pb-3 mxt-btn-container">
            <a href="{{localePrefix}}/admin/talks/edit/{{talk.id}}" class="mxt-btn-primary" style="margin-bottom: 0">
                <img src="/images/svg/mxt-icon--admin-dark.svg"
                     class="mxt-icon--navbar me-2"
                     alt="{{#i18n}}header.menu.admin{{/i18n}}">
                {{#i18n}}common.actions.update{{/i18n}}
            </a>
        </div>
    {{/admin}}
</div>
<div class="container-xxl">
    <h3 class="mxt-text--cat-format">#{{#i18n}}talk.format.{{talk.format}}{{/i18n}}</h3>
    <h1 class="text-center mxt-text--talk-h1 container pb-1 pt-0">
        {{talk.title}}
    </h1>
    <div class="">
        <ul class="mxt-wrapper-list-inline mb-0 pb-0">
            {{#speakers}}
                <li>
                    <a href="/user/{{login}}" class="mxt-text--cat mxt-text--cat-speaker">{{firstname}}&nbsp;{{lastname}}</a>
                </li>
            {{/speakers}}
        </ul>
    </div>

    {{#isCurrent}}
    <div class="mxt-btn-container">
        {{#connected}}
            <button id="favorite" class="mxt-btn-light"
                    {{^favorites}}style="display: none"{{/favorites}}
                    aria-label="{{#i18n}}favorite.selected{{/i18n}}">
                    <img src="/images/svg/favorites/mxt-favorite.svg" class="mxt-icon--cat__talks"/>
                    {{#i18n}}favorite.selected{{/i18n}}
            </button>
            <button id="nonfavorite" class="mxt-btn-light"
                    {{#favorites}}style="display: none"{{/favorites}}
                    aria-label="{{#i18n}}favorite.nonselected{{/i18n}}">
                <img src="/images/svg/favorites/mxt-favorite-non.svg" class="mxt-icon--cat__talks"/>
                {{#i18n}}favorite.nonselected{{/i18n}}
            </button>
        {{/connected}}
    </div>
    {{/isCurrent}}
    <p>{{#markdown}}{{talk.summary}}{{/markdown}}</p>

    <div class="text-center">
        {{#talk.topic}}
            <div class="mxt-text--cat mxt-text--cat-{{talk.topic}}">
                <img src="/images/svg/mxt-icon--{{talk.topic}}.svg" class="mxt-icon--cat mxt-icon--cat__talks"
                     alt="{{#i18n}}topics.{{talk.topic}}.title{{/i18n}}"/>
                <span>{{#i18n}}topics.{{talk.topic}}.title{{/i18n}}</span>
            </div>
        {{/talk.topic}}
        {{#isCurrent}}
        <div>{{#talk.date}}{{talk.date}}{{/talk.date}}</div>
        <div>{{#talk.start}}{{talk.start}} - {{talk.end}}{{/talk.start}}</div>
        <p class="mxt-text--cat-room">{{#i18n}}{{talk.room}}{{/i18n}}</p>
        {{/isCurrent}}
    </div>

    {{#talk.description}}
        <p class="mt-1 mb-1">{{#markdown}}{{talk.description}}{{/markdown}}</p>
    {{/talk.description}}

    {{#talk.video}}
        {{#twitchPlayer}}
            <div class="mxt-wrapper--intrinsic">
                <iframe src="{{talk.video}}" height="200" width="1000" allowfullscreen></iframe>
            </div>
        {{/twitchPlayer}}
        {{^twitchPlayer}}
            {{#vimeoPlayer}}
                <div class="mxt-wrapper--intrinsic mb-3">
                    <iframe src="{{vimeoPlayer}}" class="mxt-wrapper--video-player" allowfullscreen></iframe>
                </div>
            {{/vimeoPlayer}}
            {{^vimeoPlayer}}
                &#x25ba;&nbsp;{{#i18n}}talk.video.watch{{/i18n}} <a href="{{talk.video}}" target="_blank">{{#i18n}}talk.video.thevideo{{/i18n}}</a>
            {{/vimeoPlayer}}
        {{/twitchPlayer}}
    {{/talk.video}}
    {{#talk.video2}}
        {{#twitchPlayer2}}
            <div class="mxt-wrapper--intrinsic">
                <iframe src="{{talk.video2}}" height="200" width="1000" allowfullscreen></iframe>
            </div>
        {{/twitchPlayer2}}
        {{^twitchPlayer2}}
            {{#vimeoPlayer2}}
                <div class="mxt-wrapper--intrinsic mb-3">
                    <iframe src="{{vimeoPlayer2}}" class="mxt-wrapper--video-player" allowfullscreen></iframe>
                </div>
            {{/vimeoPlayer2}}
            {{^vimeoPlayer2}}
                &#x25ba;&nbsp;{{#i18n}}talk.video.watch{{/i18n}} <a href="{{talk.video2}}" target="_blank">{{#i18n}}talk.video.thevideo{{/i18n}}</a>
            {{/vimeoPlayer2}}
        {{/twitchPlayer2}}
    {{/talk.video2}}
</div>
<div class="container-xxl mxt-section">
    {{#speakers}}
        <div class="row p-2">
            <div class="col-12 col-md-2 text-center align-middle mxt-img-avatar-container">
                <a href="/user/{{login}}"><img src="{{#photoUrl}}{{photoUrl}}{{/photoUrl}}{{^photoUrl}}https://www.gravatar.com/avatar/{{emailHash}}?s=100&?s=100&d={{baseUri}}%2Fimages%2Fpng%2Fmxt-icon--default-avatar.png{{/photoUrl}}"
                    class="mxt-img-avatar__speaker"></a>
            </div>
            <div class="col-12 col-md-10 align-middle">
                <h2>{{firstname}}&nbsp;{{lastname}}</h2>

                {{#markdown}}{{description}}{{/markdown}}
                <ul class="mxt-wrapper-list-inline">
                    {{#links}}
                        <li><a href="{{url}}">{{name}}</a></li>
                    {{/links}}
                </ul>
            </div>
        </div>
    {{/speakers}}

    <script>
        function zoomImage(id) {
            const div = document.getElementById(id);
            if(div.classList.contains('col-6')) {
                div.classList.remove('col-6');
                div.classList.remove('col-lg-4');
                div.classList.add('col-12');
            }
            else {
                div.classList.add('col-6');
                div.classList.add('col-lg-4');
                div.classList.remove('col-12');
            }

        }
    </script>
</div>
<div class="container-xxl" style="justify-content: center">
    <div class="row">
    {{#images}}
        <div class="col-6 col-lg-4" id="{{name}}">
            <img class="mxt-img--grayscale pb-2" style="width: 100%;cursor:pointer"
                 onclick="zoomImage('{{name}}')" onblur="zoomImage('{{name}}')"
                 src="https://raw.githubusercontent.com/mixitconf/mixitconf-images/main/{{event}}/{{sectionId}}/{{name}}">
        </div>
    {{/images}}
    {{#talk.photoUrls}}
        <div class="col-4">
            <a href="{{url}}"><img src="{{url}}" aria-label="{{name}}" class="mxt-img--grayscale pb-2"/></a>
        </div>
    {{/talk.photoUrls}}
    </div>
</div>
{{#hasFeatureFeedback}}
<div class="container-xxl">
    <h2 class="pt-5">{{#i18n}}feedback.title{{/i18n}}</h2>
    <p>
        {{#i18n}}feedback.{{talk.format}}.description{{/i18n}}
        {{#connected}}{{#i18n}}feedback.available{{/i18n}}{{/connected}}
        {{^connected}}{{#i18n}}feedback.not.available{{/i18n}}{{/connected}}
        <br>
        <i>{{#i18n}}feedback.anonymous{{/i18n}}</i>
    </p>

    <div class="row">
    {{#feedbackTypes}}
        <div class="col-4 p-3" >
            <div class="mxt-feedback--container text-center {{#second.selectedByCurrentUser}}mxt-feedback-selected{{/second.selectedByCurrentUser}}"
                 id="mxt-feedback-{{first}}--container">
                <div>{{first}}</div>
                <div>Votes : <span id="mxt-feedback-{{first}}--vote">{{second.count}}</span></div>
                {{#connected}}
                <div>
                    <button data-feedback="{{first}}"
                            data-vote="{{second.selectedByCurrentUser}}"
                            data-email="{{email}}"
                            data-talk="{{talk.id}}"
                            class="mxt-feedback-btn">Vote</button>
                </div>
                {{/connected}}
            </div>
        </div>
    {{/feedbackTypes}}
    </div>
    {{#connected}}
        <div class="mxt-btn-container pb-4">
            <button class="mxt-btn-light" id="mxt-feedback-comment--new">{{#i18n}}feedback.action{{/i18n}}</button>
        </div>
        <div class="row pt-4 pb-4" id="mxt-feedback-comment--container" style="display: none">
            <form method="post" action="/{{year}}/{{talk.slug}}/feedback/comment">
                <input type="hidden" name="email" value="{{email}}">
                <input type="hidden" name="talkId" value="{{talk.id}}">
                {{#i18n}}feedback.comment{{/i18n}}
                <textarea name="comment"
                          type="text"
                          class="form-control col-10"
                          rows="2">{{#feedbackComments.userComment}}{{feedbackComments.userComment}}{{/feedbackComments.userComment}}</textarea>
                <div class="mxt-btn-container pt-3">
                    <button class="mxt-btn-light me-2" id="mxt-feedback-comment--cancel">
                        {{#i18n}}common.actions.cancel{{/i18n}}</button>
                    <button class="mxt-btn-primary" id="mxt-feedback-comment--button">
                        {{#i18n}}common.actions.save{{/i18n}}</button>
                </div>
            </form>
        </div>
    {{/connected}}
    {{#feedbackComments.otherComments}}
        <div class="mxt-feedback-comment--container row">
            <div class="col-2">+: {{plusCount}}, -: {{minusCount}}</div>
            <div class="col-10">{{comment}}</div>
        </div>
    {{/feedbackComments.otherComments}}

</div>
{{/hasFeatureFeedback}}

{{#connected}}
    <input type="hidden" id="talkId" value="{{talk.id}}"/>
    <input type="hidden" id="email" value="{{email}}"/>
{{/connected}}


{{> footer-sponsor}}
